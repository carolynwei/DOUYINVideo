# ğŸ¬ VideoTaxi (VibeDrive) - é¡¹ç›®å…¨æ™¯ Wiki

> **å¼€ä½ çš„ VideoTaxiï¼Œåœ¨æŠ–éŸ³å…¬è·¯ä¸Šè‡ªç”±é©°éª‹**

---

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

| å±æ€§ | è¯¦æƒ… |
|------|------|
| **é¡¹ç›®åç§°** | VideoTaxi / ASSASSIN AI / è®¤çŸ¥åˆºå®¢åˆ›ä½œå¹³å° |
| **æ ¸å¿ƒå®šä½** | AIé©±åŠ¨çš„å…¨è‡ªåŠ¨çŸ­è§†é¢‘ç”Ÿæˆå·¥å…· |
| **ç›®æ ‡å¹³å°** | æŠ–éŸ³ï¼ˆç«–å± 9:16ï¼Œ1080x1920ï¼‰ |
| **æŠ€æœ¯æ ˆ** | Python + Streamlit + DeepSeek + æ™ºè°±AI + ç«å±±å¼•æ“ |
| **æ¶æ„æ¨¡å¼** | è·¯ç”±ä¸­å¿ƒåŒ– + è§†å›¾å±‚åˆ†ç¦» + ä¾èµ–æ³¨å…¥ |
| **éƒ¨ç½²æ–¹å¼** | æœ¬åœ°è¿è¡Œ / Streamlit Cloud / VPS |
| **å½“å‰ç‰ˆæœ¬** | v3.1.0 (2026-02-22) - æ¨¡å—åŒ–é‡æ„ç‰ˆ |
| **ä»“åº“åœ°å€** | https://github.com/carolynwei/DOUYINVideo |

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### 5åˆ†é’Ÿå¯åŠ¨æŒ‡å—

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/carolynwei/DOUYINVideo.git
cd DOUYINVideo

# 2. åˆ›å»ºå¹¶æ¿€æ´» conda ç¯å¢ƒ
conda create -n douyin-video-env python=3.9
conda activate douyin-video-env

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. é…ç½® API å¯†é’¥
cp .streamlit/secrets.toml.example .streamlit/secrets.toml
# ç¼–è¾‘ secrets.tomlï¼Œå¡«å…¥ä½ çš„ API Keys

# 5. è¿è¡Œ
streamlit run app.py
```

æµè§ˆå™¨å°†è‡ªåŠ¨æ‰“å¼€ `http://localhost:8501`

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·ç•Œé¢å±‚ (UI Layer)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å‰§æœ¬æ„æ€ Tab â”‚  â”‚ å½±åƒå·¥åŠ Tab â”‚  â”‚      å†å²èµ„äº§ Tab        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              å¯¹è¯åˆ›ä½œæ¨¡å¼ (Chat Mode)                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¸šåŠ¡é€»è¾‘å±‚ (Service Layer)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å¯¼èˆªå‘˜ç³»ç»Ÿ  â”‚  â”‚  å‰§æœ¬ç”Ÿæˆå™¨  â”‚  â”‚      è§†é¢‘æ¸²æŸ“å¼•æ“        â”‚  â”‚
â”‚  â”‚TianapiNavigatorâ”‚ â”‚api_services â”‚  â”‚     video_engine        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  è°ƒåº¦å¡”å°    â”‚  â”‚  ç”¨æˆ·ç³»ç»Ÿ    â”‚  â”‚      å¯¹è¯åŠ©æ‰‹           â”‚  â”‚
â”‚  â”‚SchedulerTowerâ”‚ â”‚ db_manager  â”‚  â”‚      chat_page          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å¤–éƒ¨æœåŠ¡å±‚ (API Layer)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ DeepSeek â”‚ â”‚  æ™ºè°±AI   â”‚ â”‚ å¤©è¡Œæ•°æ®  â”‚ â”‚ ç«å±±å¼•æ“  â”‚ â”‚ Pexels â”‚ â”‚
â”‚  â”‚  LLM     â”‚ â”‚ CogView  â”‚ â”‚ æŠ–éŸ³çƒ­æœ  â”‚ â”‚   TTS    â”‚ â”‚ è§†é¢‘   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„è¯¦è§£

```
douyinVideo/
â”‚
â”œâ”€â”€ ğŸ“„ æ ¸å¿ƒåº”ç”¨æ–‡ä»¶
â”‚   â”œâ”€â”€ app.py                    # ğŸ¯ ä¸»åº”ç”¨å…¥å£ (276è¡Œ) - è·¯ç”±ä¸­å¿ƒåŒ–æ¶æ„
â”‚   â”‚                              #    - Streamlité¡µé¢é…ç½®
â”‚   â”‚                              #    - Session State åˆå§‹åŒ–
â”‚   â”‚                              #    - ä¾§è¾¹æ æ¸²æŸ“
â”‚   â”‚                              #    - Tab è·¯ç”±åˆ†å‘
â”‚   â”‚
â”‚   â”œâ”€â”€ api_services.py           # ğŸ”Œ AI APIæœåŠ¡å±‚ (548è¡Œ)
â”‚   â”‚                              #    - get_hot_topics(): æŠ–éŸ³çƒ­æœè·å–
â”‚   â”‚                              #    - generate_script_json(): æ ‡å‡†å‰§æœ¬ç”Ÿæˆ
â”‚   â”‚                              #    - generate_viral_script(): çˆ†æ¬¾å‰§æœ¬ç”Ÿæˆ
â”‚   â”‚                              #    - generate_script_by_style(): 5é£æ ¼å‰§æœ¬ç”Ÿæˆ
â”‚   â”‚                              #    - generate_images_zhipu(): æ™ºè°±AIç»˜ç”»
â”‚   â”‚                              #    - refine_script_data(): å¤§å¸ˆç²¾ä¿®
â”‚   â”‚                              #    - refine_script_by_chat(): å¯¹è¯å¾®è°ƒ
â”‚   â”‚
â”‚   â”œâ”€â”€ video_engine.py           # ğŸ¬ è§†é¢‘æ¸²æŸ“å¼•æ“ (890è¡Œ)
â”‚   â”‚                              #    - VIBE_ROUTING_TABLE: æƒ…ç»ª-å‚æ•°è·¯ç”±è¡¨
â”‚   â”‚                              #    - get_bgm_by_style(): BGMé£æ ¼è·¯ç”±
â”‚   â”‚                              #    - create_subtitle_image(): Pillowå­—å¹•ç»˜åˆ¶
â”‚   â”‚                              #    - call_volcengine_tts(): ç«å±±å¼•æ“TTS
â”‚   â”‚                              #    - text_to_mp3(): Edge TTSåˆæˆ
â”‚   â”‚                              #    - synthesize_emotional_segments_parallel(): æƒ…ç»ªç‰‡æ®µå¹¶è¡Œåˆæˆ
â”‚   â”‚                              #    - render_ai_video_pipeline(): æ ¸å¿ƒæ¸²æŸ“ç®¡çº¿
â”‚   â”‚                              #    - VideoAssembler: å¯¼æ¼”æ—¶é—´è½´å¼•æ“
â”‚   â”‚
â”‚   â”œâ”€â”€ db_manager.py             # ğŸ’¾ æ•°æ®åº“ç®¡ç† (146è¡Œ)
â”‚   â”‚                              #    - init_db(): åˆå§‹åŒ–ç”¨æˆ·è¡¨
â”‚   â”‚                              #    - get_or_create_user(): ç”¨æˆ·æ³¨å†Œ/ç™»å½•
â”‚   â”‚                              #    - check_in(): æ¯æ—¥ç­¾åˆ°é€»è¾‘
â”‚   â”‚                              #    - deduct_credits(): ç§¯åˆ†æ‰£é™¤
â”‚   â”‚                              #    - init_chat_db(): èŠå¤©è®°å½•è¡¨
â”‚   â”‚                              #    - save_script_version(): å‰§æœ¬ç‰ˆæœ¬æŒä¹…åŒ–
â”‚   â”‚
â”‚   â”œâ”€â”€ chat_page.py              # ğŸ’¬ å¯¹è¯åˆ›ä½œé¡µ (168è¡Œ)
â”‚   â”‚                              #    - call_deepseek_chat(): DeepSeek APIè°ƒç”¨
â”‚   â”‚                              #    - render_chat_page(): èŠå¤©ç•Œé¢æ¸²æŸ“
â”‚   â”‚
â”‚   â”œâ”€â”€ tianapi_navigator.py      # ğŸ›°ï¸ çƒ­ç‚¹å¯¼èˆªå‘˜ (429è¡Œ)
â”‚   â”‚                              #    - TianapiNavigator: å¤©è¡Œæ•°æ®å¯¹æ¥
â”‚   â”‚                              #    - VIBE_ROUTING_TABLE: é£æ ¼å…³é”®è¯æ˜ å°„
â”‚   â”‚                              #    - fetch_today_missions(): ä»Šæ—¥ä»»åŠ¡æ¸…å•
â”‚   â”‚                              #    - expand_topic_context(): çƒ­ç‚¹èƒŒæ™¯æ‰©å……
â”‚   â”‚                              #    - auto_pilot_generate(): å…¨è‡ªåŠ¨å‘è½¦
â”‚   â”‚
â”‚   â”œâ”€â”€ scheduler_tower.py        # ğŸ—¼ è°ƒåº¦å¡”å° (545è¡Œ)
â”‚   â”‚                              #    - PerformanceMetrics: è§†é¢‘è¡¨ç°æ•°æ®æ¨¡å‹
â”‚   â”‚                              #    - FeedbackDatabase: åé¦ˆæ•°æ®æŒä¹…åŒ–
â”‚   â”‚                              #    - DataAwareNavigator: æ•°æ®æ„Ÿåº”å¯¼èˆª
â”‚   â”‚                              #    - SchedulerTower: 7x24å°æ—¶è‡ªåŠ¨è°ƒåº¦
â”‚   â”‚
â”‚   â””â”€â”€ cyber_theme.py            # ğŸ¨ èµ›åšä¸»é¢˜ç³»ç»Ÿ (357è¡Œ)
â”‚                                   #    - apply_cyber_theme(): å…¨å±€CSSä¸»é¢˜
â”‚                                   #    - render_sidebar_dashboard(): ä¾§è¾¹æ é¢æ¿
â”‚
â”œâ”€â”€ ğŸ–¼ï¸ è§†å›¾å±‚ (views/)
â”‚   â”œâ”€â”€ __init__.py               # è§†å›¾æ¨¡å—å…¥å£
â”‚   â”œâ”€â”€ script_view.py            # ğŸ”¥ å‰§æœ¬æ„æ€ Tab (625è¡Œ)
â”‚   â”‚                              #    - åˆ›ä½œé¢æ¿ï¼ˆä¸»é¢˜è¾“å…¥+é£æ ¼é€‰æ‹©ï¼‰
â”‚   â”‚                              #    - å‰§æœ¬ç¼–è¾‘å™¨ï¼ˆdata_editorï¼‰
â”‚   â”‚                              #    - å·¥ä½œæµçŠ¶æ€æœºï¼ˆdraftâ†’lockedâ†’producingâ†’completedï¼‰
â”‚   â”‚                              #    - SSMLè´¨é‡æ£€æŸ¥
â”‚   â”‚                              #    - å¯¹è¯å¾®è°ƒ
â”‚   â”‚
â”‚   â”œâ”€â”€ video_view.py             # ğŸ¬ å½±åƒå·¥åŠ Tab (47è¡Œ)
â”‚   â”‚                              #    - åˆ†é•œé¢„è§ˆå¡ç‰‡ç½‘æ ¼
â”‚   â”‚                              #    - æ–‡æ¡ˆæŸ¥çœ‹å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ assets_view.py            # ğŸ“‚ å†å²èµ„äº§ Tab (73è¡Œ)
â”‚   â”‚                              #    - åˆ›ä½œç»Ÿè®¡
â”‚   â”‚                              #    - å†å²ç‰ˆæœ¬åˆ—è¡¨
â”‚   â”‚                              #    - ç‰ˆæœ¬æ¢å¤åŠŸèƒ½
â”‚   â”‚
â”‚   â”œâ”€â”€ sidebar_view.py           # ğŸ“Š ä¾§è¾¹æ è§†å›¾ (356è¡Œ)
â”‚   â”‚                              #    - ç”¨æˆ·ç™»å½•/ç­¾åˆ°
â”‚   â”‚                              #    - çƒ­ç‚¹é›·è¾¾
â”‚   â”‚                              #    - å…¨è‡ªåŠ¨å‘è½¦
â”‚   â”‚                              #    - è°ƒåº¦å¡”å°
â”‚   â”‚                              #    - å¼•æ“è®¾ç½®
â”‚   â”‚
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ hero_section.py       # ğŸ¬ Hero è§†è§‰ç»„ä»¶
â”‚
â”œâ”€â”€ ğŸ¨ èµ„æºæ–‡ä»¶
â”‚   â””â”€â”€ assets/
â”‚       â”œâ”€â”€ font.ttf              # ä¸­æ–‡å­—ä½“ (å­—å¹•æ¸²æŸ“å¿…éœ€)
â”‚       â”œâ”€â”€ bgm.mp3               # é»˜è®¤èƒŒæ™¯éŸ³ä¹
â”‚       â””â”€â”€ bgm/                  # BGMé£æ ¼åº“
â”‚           â”œâ”€â”€ assassin/         # ğŸ—¡ï¸ è®¤çŸ¥åˆºå®¢æµBGM
â”‚           â”œâ”€â”€ growth/           # ğŸ‘ å¬åŠå…»æˆBGM
â”‚           â”œâ”€â”€ pov/              # ğŸ¬ POVæ²‰æµ¸BGM
â”‚           â”œâ”€â”€ venting/          # ğŸ”¥ æƒ…ç»ªå®£æ³„BGM
â”‚           â”œâ”€â”€ meme/             # ğŸ± MemeæŠ—è±¡BGM
â”‚           â””â”€â”€ README.md         # BGMä½¿ç”¨è¯´æ˜
â”‚
â”œâ”€â”€ âš™ï¸ é…ç½®ä¸éƒ¨ç½²
â”‚   â”œâ”€â”€ .streamlit/
â”‚   â”‚   â”œâ”€â”€ config.toml           # Streamlité…ç½®
â”‚   â”‚   â””â”€â”€ secrets.toml          # APIå¯†é’¥ (éœ€è‡ªè¡Œåˆ›å»º)
â”‚   â”‚                               #    - TIANAPI_KEY / tianapi.key
â”‚   â”‚                               #    - DEEPSEEK_KEY / deepseek.key
â”‚   â”‚                               #    - ZHIPU_KEY / zhipu.key
â”‚   â”‚                               #    - PEXELS_KEY / pexels.key (å¯é€‰)
â”‚   â”‚                               #    - VOLC_APPID / VOLC_ACCESS_TOKEN (å¯é€‰)
â”‚   â”‚
â”‚   â”œâ”€â”€ requirements.txt          # Pythonä¾èµ–
â”‚   â”œâ”€â”€ packages.txt              # ç³»ç»Ÿä¾èµ– (fonts-noto-cjk, ffmpeg)
â”‚   â”œâ”€â”€ runtime.txt               # Pythonç‰ˆæœ¬ (3.9)
â”‚   â””â”€â”€ environment.yml           # Condaç¯å¢ƒé…ç½®
â”‚
â”œâ”€â”€ ğŸ§ª æµ‹è¯•ä¸ç¤ºä¾‹
â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ test_pipeline.py      # åŠŸèƒ½æµ‹è¯•è„šæœ¬
â”‚   â”‚   â””â”€â”€ test_zhipu_api.py     # æ™ºè°±APIæµ‹è¯•
â”‚   â”‚
â”‚   â””â”€â”€ examples/volcengine/
â”‚       â””â”€â”€ bidirection.py        # ç«å±±å¼•æ“TTS V3 SDK
â”‚
â”œâ”€â”€ ğŸ“ æ–‡æ¡£
â”‚   â””â”€â”€ docs/
â”‚       â””â”€â”€ æ”¹è¿›.md               # å¼€å‘æ€è·¯ä¸æ”¹è¿›å»ºè®®
â”‚
â””â”€â”€ ğŸ“Š æ•°æ®æ–‡ä»¶
    â””â”€â”€ app_data.db               # SQLiteæ•°æ®åº“ (è‡ªåŠ¨ç”Ÿæˆ)
```

---

## ğŸ® æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1ï¸âƒ£ æ¸è¿›å¼å·¥ä½œæµ (Progressive Workflow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  draft  â”‚ â†’ â”‚ locked  â”‚ â†’ â”‚ producing â”‚ â†’ â”‚ completed â”‚
â”‚  è‰ç¨¿   â”‚    â”‚  é”å®š   â”‚    â”‚  ç”Ÿäº§ä¸­   â”‚    â”‚  å·²å®Œæˆ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚              â”‚              â”‚
   å¯ç¼–è¾‘         ä¸å¯ç¼–è¾‘       æ¸²æŸ“ä¸­          å¯ä¸‹è½½
   å¯å¾®è°ƒ         å¯è§£é”         è¿›åº¦æ˜¾ç¤º        å¯é‡ç½®
```

**çŠ¶æ€æµè½¬è§„åˆ™ï¼š**
- **draft â†’ locked**: ç‚¹å‡»"é”å®šå‰§æœ¬"ï¼Œä¿å­˜ç‰ˆæœ¬å¿«ç…§
- **locked â†’ producing**: ç‚¹å‡»"ä¸€é”®ç”Ÿäº§"ï¼Œå¼€å§‹æ¸²æŸ“
- **producing â†’ completed**: æ¸²æŸ“æˆåŠŸï¼Œæ˜¾ç¤ºä¸‹è½½æŒ‰é’®
- **locked â†’ draft**: ç‚¹å‡»"è§£é”"ï¼Œæ¢å¤ç¼–è¾‘
- **completed â†’ draft**: ç‚¹å‡»"åˆ›ä½œä¸‹ä¸€ä¸ª"ï¼Œé‡ç½®çŠ¶æ€

---

### 2ï¸âƒ£ äº”å¤§çˆ†æ¬¾é£æ ¼ç³»ç»Ÿ

| é£æ ¼ | æ ¸å¿ƒç‰¹å¾ | è§†è§‰é£æ ¼ | BGMéŸ³é‡ | é€‚ç”¨åœºæ™¯ |
|------|----------|----------|---------|----------|
| ğŸ—¡ï¸ è®¤çŸ¥åˆºå®¢ | å†²å‡»+æ‰å¿ƒ+äººé—´æ¸…é†’ | Sam Kolder ç”µå½±æ„Ÿ | 0.15 | æ­éœ²çœŸç›¸ã€æ‰“ç ´è®¤çŸ¥ |
| ğŸ‘ å¬åŠå…»æˆ | çœŸè¯š+ä½å§¿æ€+èœ•å˜ | Brandon Li Vlog | 0.08 | å…»æˆç³»ã€æ±‚åŠ©äº’åŠ¨ |
| ğŸ¬ POVæ²‰æµ¸ | ä»£å…¥æ„Ÿ+å‹è¿«æ„Ÿ+å…±æƒ… | ç¬¬ä¸€äººç§°è§†è§’ | 0.12 | æ•…äº‹å™è¿°ã€èº«ä¸´å…¶å¢ƒ |
| ğŸ”¥ æƒ…ç»ªå®£æ³„ | çˆ½æ„Ÿ+åè½¬+å‘ç–¯æ–‡å­¦ | æè¿‘ç‰¹å†™+å¿«é€Ÿå‰ªè¾‘ | 0.25 | æƒ…ç»ªå‡ºå£ã€çˆ½æ–‡å‰§æƒ… |
| ğŸ± MemeæŠ—è±¡ | å¹½é»˜+ç—…æ¯’+è§£å‹ | æ‰å¹³åŒ–+é«˜é¥±å’Œ | 0.20 | ç—…æ¯’ä¼ æ’­ã€ä½æˆæœ¬ |

---

### 3ï¸âƒ£ TTS æƒ…ç»ªæ ‡æ³¨ç³»ç»Ÿ (SSML)

```xml
<!-- è¯­é€Ÿæ§åˆ¶ -->
<prosody rate="fast">ç´§å¼ å†²å‡»</prosody>
<prosody rate="slow">å¼ºè°ƒæ²‰æ€</prosody>

<!-- éŸ³è°ƒæ§åˆ¶ -->
<prosody pitch="+15%">å…´å¥‹æƒŠè®¶</prosody>
<prosody pitch="-10%">ä¸¥è‚ƒä½æ²‰</prosody>

<!-- éŸ³é‡æ§åˆ¶ -->
<prosody volume="+20%">æ ¸å¿ƒç»“è®º</prosody>
<prosody volume="-10%">ä½å£°ç§˜å¯†</prosody>

<!-- ç»„åˆä½¿ç”¨ -->
<prosody rate="fast" pitch="+10%" volume="+15%">
  çˆ†ç‚¹é‡‘å¥ï¼
</prosody>
```

**æƒ…ç»ªæ›²çº¿è§„èŒƒï¼š**
- Hook(å†·å¯åŠ¨): `cold_question` / `sarcastic_mock`
- Content(æ·±å…¥): `deep_mystery` / `neutral_narrate`
- Gold(çˆ†å‘): `angry_shout` / `excited_announce` / `fierce_warning`
- Outro(ä½™éŸµ): `sad_sigh` / `neutral_narrate`

---

### 4ï¸âƒ£ ç”¨æˆ·ç§¯åˆ†ç³»ç»Ÿ

| æ“ä½œ | ç§¯åˆ†å˜åŒ– | è¯´æ˜ |
|------|----------|------|
| æ–°ç”¨æˆ·æ³¨å†Œ | +20 | åˆå§‹èµ é€ |
| æ¯æ—¥ç­¾åˆ° | +5~15 | è¿ç»­ç­¾åˆ°é€’å¢ï¼Œå°é¡¶15 |
| DeepSeekè°ƒç”¨ | -1 | æ€§ä»·æ¯”ä¹‹é€‰ |
| Claude 3.5è°ƒç”¨ | -4 | æ–‡ç¬”æä½³ |
| GPT-4oè°ƒç”¨ | -5 | é«˜æ™ºèƒ½æ·±åº¦é‡å†™ |

---

## ğŸ”Œ API æœåŠ¡æ˜ å°„

### å¤–éƒ¨APIæ¸…å•

| æœåŠ¡ | ç”¨é€” | å…³é”®å‡½æ•° | é…ç½®é¡¹ |
|------|------|----------|--------|
| **DeepSeek** | LLMå‰§æœ¬ç”Ÿæˆ | `generate_script_by_style()` | `DEEPSEEK_KEY` |
| **æ™ºè°±AI** | AIç»˜ç”»(CogView-3-Plus) | `generate_images_zhipu()` | `ZHIPU_KEY` |
| **å¤©è¡Œæ•°æ®** | æŠ–éŸ³çƒ­æœæ¦œå• | `get_hot_topics()` | `TIANAPI_KEY` |
| **ç«å±±å¼•æ“** | é«˜é˜¶TTS(è±†åŒ…å¤§æ¨¡å‹) | `call_volcengine_tts()` | `VOLC_APPID`, `VOLC_ACCESS_TOKEN` |
| **Pexels** | çœŸå®ç´ æè§†é¢‘(å¯é€‰) | `get_pexels_videos()` | `PEXELS_KEY` |

### å†…éƒ¨æ¨¡å—ä¾èµ–å›¾

```
app.py
â”œâ”€â”€ api_services.py
â”‚   â”œâ”€â”€ DeepSeek API
â”‚   â””â”€â”€ æ™ºè°±AI API
â”œâ”€â”€ video_engine.py
â”‚   â”œâ”€â”€ æ™ºè°±AI API (å›¾ç‰‡ç”Ÿæˆ)
â”‚   â”œâ”€â”€ ç«å±±å¼•æ“ TTS / Edge TTS
â”‚   â””â”€â”€ MoviePy (è§†é¢‘åˆæˆ)
â”œâ”€â”€ db_manager.py
â”‚   â””â”€â”€ SQLite
â”œâ”€â”€ chat_page.py
â”‚   â””â”€â”€ DeepSeek API
â”œâ”€â”€ tianapi_navigator.py
â”‚   â””â”€â”€ å¤©è¡Œæ•°æ® API
â””â”€â”€ scheduler_tower.py
    â””â”€â”€ ä¾èµ–ä¸Šè¿°æ‰€æœ‰æ¨¡å—
```

---

## ğŸ¨ ä¸»é¢˜ç³»ç»Ÿ

### èµ›åšé©¾é©¶èˆ±ä¸»é¢˜ (Cyber Taxi Dashboard)

```css
/* æ ¸å¿ƒé…è‰² */
--bg-primary: #0d1117      /* æ·±é‚ƒèƒŒæ™¯ */
--bg-secondary: #161b22    /* å¡ç‰‡èƒŒæ™¯ */
--accent: #FF3131          /* åˆºå®¢çº¢ */
--accent-hover: #FF6161    /* å‘¼å¸ç¯æ•ˆæœ */
--text-primary: #E6EDF3    /* ä¸»æ–‡å­— */
--text-secondary: #8b949e  /* æ¬¡è¦æ–‡å­— */
--border: #30363d          /* è¾¹æ¡† */
```

**è§†è§‰ç‰¹æ•ˆï¼š**
- åˆºå®¢çº¢å‘¼å¸ç¯åŠ¨ç”» (metric-pulse)
- èµ›é“æ¡çº¹è¿›åº¦æ¡ (progress-move)
- ç”µå­è„‰å†²æŒ‰é’®æ•ˆæœ
- 3Då¡ç‰‡æ‚¬æµ®æ•ˆæœ
- éœ“è™¹ç¯æµå…‰HeroåŒº

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æ–¹æ¡ˆä¸€ï¼šæœ¬åœ°å¼€å‘

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/carolynwei/DOUYINVideo.git
cd DOUYINVideo

# 2. åˆ›å»º conda ç¯å¢ƒ
conda create -n douyin-video-env python=3.9
conda activate douyin-video-env

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. é…ç½®å¯†é’¥
cp .streamlit/secrets.toml.example .streamlit/secrets.toml
# ç¼–è¾‘ .streamlit/secrets.tomlï¼Œå¡«å…¥ä½ çš„ API Keys

# 5. è¿è¡Œ
streamlit run app.py
```

### æ–¹æ¡ˆäºŒï¼šStreamlit Cloud éƒ¨ç½²ï¼ˆæ¨èæ–°æ‰‹ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GitHub    â”‚â”€â”€â”€â”€â†’â”‚ Streamlit   â”‚â”€â”€â”€â”€â†’â”‚   äº‘ç«¯åº”ç”¨       â”‚
â”‚   ä»“åº“      â”‚     â”‚   Cloud     â”‚     â”‚   (è‡ªåŠ¨éƒ¨ç½²)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                           â”‚
       â”‚         1. Fork ä»“åº“åˆ°ä¸ªäººè´¦å·              â”‚
       â”‚         2. ç™»å½• share.streamlit.io         â”‚
       â”‚         3. åˆ›å»º New app                     â”‚
       â”‚         4. é€‰æ‹© GitHub ä»“åº“                 â”‚
       â”‚         5. é…ç½® Secrets                     â”‚
       â”‚         6. Deploy                           â”‚
       â”‚                                           â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â†’ æ¨é€ä»£ç è‡ªåŠ¨è§¦å‘é‡æ–°éƒ¨ç½² â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¯¦ç»†æ­¥éª¤ï¼š**

1. **Fork ä»“åº“**
   - è®¿é—® https://github.com/carolynwei/DOUYINVideo
   - ç‚¹å‡»å³ä¸Šè§’ Fork æŒ‰é’®

2. **ç™»å½• Streamlit Cloud**
   - è®¿é—® https://share.streamlit.io
   - ä½¿ç”¨ GitHub è´¦å·ç™»å½•

3. **åˆ›å»ºåº”ç”¨**
   - ç‚¹å‡» "New app"
   - Repository: é€‰æ‹©ä½ çš„ Fork
   - Branch: `master`
   - Main file path: `app.py`

4. **é…ç½® Secretsï¼ˆå¿…éœ€ï¼‰**
   ```toml
   DEEPSEEK_KEY = "sk-your-deepseek-key"
   ZHIPU_KEY = "your-zhipu-key"
   TIANAPI_KEY = "your-tianapi-key"
   PEXELS_KEY = "your-pexels-key"  # å¯é€‰
   VOLC_APPID = "your-volc-appid"  # å¯é€‰
   VOLC_ACCESS_TOKEN = "your-volc-token"  # å¯é€‰
   ```

5. **ç‚¹å‡» Deploy**
   - ç­‰å¾… 2-3 åˆ†é’Ÿæ„å»ºå®Œæˆ
   - è·å¾—ä¸“å± URL: `https://your-app-name.streamlit.app`

### æ–¹æ¡ˆä¸‰ï¼šVPS æœåŠ¡å™¨éƒ¨ç½²ï¼ˆ7x24æ— äººå€¼å®ˆï¼‰

é€‚ç”¨äºéœ€è¦çœŸæ­£"æ— äººå€¼å®ˆ"å®šæ—¶è°ƒåº¦çš„åœºæ™¯ã€‚

```bash
# 1. è¿æ¥æœåŠ¡å™¨
ssh root@your-server-ip

# 2. å®‰è£…ä¾èµ–
apt-get update
apt-get install -y python3-pip ffmpeg git

# 3. å…‹éš†ä»“åº“
git clone https://github.com/carolynwei/DOUYINVideo.git
cd DOUYINVideo

# 4. å®‰è£… Python ä¾èµ–
pip3 install -r requirements.txt

# 5. é…ç½®ç¯å¢ƒå˜é‡
export DEEPSEEK_KEY="your-key"
export ZHIPU_KEY="your-key"
export TIANAPI_KEY="your-key"

# 6. å¯åŠ¨å®šæ—¶è°ƒåº¦ï¼ˆåå°è¿è¡Œï¼‰
nohup python3 run_scheduler.py --time 04:00 --num 2 > scheduler.log 2>&1 &

# 7. æŸ¥çœ‹æ—¥å¿—
tail -f scheduler.log
```

**ä½¿ç”¨ systemd å®ˆæŠ¤è¿›ç¨‹ï¼ˆæ¨èï¼‰ï¼š**

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/videotaxi.service`:
```ini
[Unit]
Description=VideoTaxi Scheduler
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/DOUYINVideo
Environment=DEEPSEEK_KEY=your-key
Environment=ZHIPU_KEY=your-key
Environment=TIANAPI_KEY=your-key
ExecStart=/usr/bin/python3 run_scheduler.py --time 04:00 --num 2
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
systemctl enable videotaxi
systemctl start videotaxi
systemctl status videotaxi
```

---

## ğŸ“Š æ•°æ®æ¨¡å‹

### ç”¨æˆ·è¡¨ (users)
```sql
CREATE TABLE users (
    user_id TEXT PRIMARY KEY,
    credits INTEGER DEFAULT 0,
    last_login_date DATE,
    consecutive_days INTEGER DEFAULT 0
);
```

### èŠå¤©è®°å½•è¡¨ (chat_history)
```sql
CREATE TABLE chat_history (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id TEXT,
    role TEXT,
    content TEXT,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### è§†é¢‘è¡¨ç°è¡¨ (video_performance)
```sql
CREATE TABLE video_performance (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    video_id TEXT UNIQUE,
    topic TEXT,
    style TEXT,
    publish_time TIMESTAMP,
    views INTEGER DEFAULT 0,
    likes INTEGER DEFAULT 0,
    comments INTEGER DEFAULT 0,
    shares INTEGER DEFAULT 0,
    completion_rate REAL DEFAULT 0.0
);
```

---

## ğŸ”„ ç‰ˆæœ¬æ¼”è¿›

| ç‰ˆæœ¬ | æ—¶é—´ | æ ¸å¿ƒç‰¹æ€§ |
|------|------|----------|
| v1.0.0 | 2024-01 | åŸºç¡€è§†é¢‘ç”Ÿæˆ |
| v1.5.0 | 2024-02 | ç«å±±å¼•æ“TTSã€AIç²¾ä¿® |
| v2.0.0 | 2024-02 | å¯¹è¯åˆ›ä½œæ¨¡å¼ã€ç§¯åˆ†ç³»ç»Ÿ |
| v3.0.0 | 2026-02 | æ¸è¿›å¼å·¥ä½œæµã€BGMè·¯ç”±ã€SSMLæ ‡æ³¨ |
| **v3.1.0** | **2026-02** | **æ¨¡å—åŒ–é‡æ„ï¼šè·¯ç”±ä¸­å¿ƒåŒ–æ¶æ„ã€è§†å›¾å±‚åˆ†ç¦»ã€ä»£ç ä»1277è¡Œç²¾ç®€è‡³276è¡Œ** |

---

## ğŸ› ï¸ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼
- æ–‡ä»¶ç¼–ç : UTF-8
- ç¼©è¿›: 4ç©ºæ ¼
- å­—ç¬¦ä¸²: åŒå¼•å·ä¼˜å…ˆ
- æ³¨é‡Š: ä¸­æ–‡ï¼Œè¯´æ˜"ä¸ºä»€ä¹ˆ"è€Œé"æ˜¯ä»€ä¹ˆ"

### å‘½åçº¦å®š
- æ¨¡å—: `snake_case.py`
- ç±»: `PascalCase`
- å‡½æ•°: `snake_case()`
- å¸¸é‡: `UPPER_SNAKE_CASE`

### Session State é”®åè§„èŒƒ
```python
# å·¥ä½œæµçŠ¶æ€
st.session_state.workflow_state      # draft/locked/producing/completed
st.session_state.script_versions     # ç‰ˆæœ¬å†å²åˆ—è¡¨
st.session_state.current_version_index # å½“å‰ç‰ˆæœ¬ç´¢å¼•

# ç”¨æˆ·æ•°æ®
st.session_state.user_id             # å½“å‰ç”¨æˆ·ID
st.session_state.page_mode           # é¡µé¢æ¨¡å¼

# åˆ›ä½œæ•°æ®
st.session_state.scenes_data         # å½“å‰å‰§æœ¬æ•°æ®
st.session_state.chat_history        # å¯¹è¯å¾®è°ƒå†å²
st.session_state.voice_id            # é€‰ä¸­çš„éŸ³è‰²ID
st.session_state.model_id            # é€‰ä¸­çš„æ¨¡å‹ID
```

---

## ğŸ“š API æ–‡æ¡£

### api_services.py

#### `get_hot_topics(api_key: str) -> List[str]`
è·å–æŠ–éŸ³çƒ­æœæ¦œå•ã€‚

**å‚æ•°ï¼š**
- `api_key`: å¤©è¡Œæ•°æ® API Key

**è¿”å›ï¼š**
- çƒ­æœå…³é”®è¯åˆ—è¡¨ï¼ˆå‰10æ¡ï¼‰

**ç¤ºä¾‹ï¼š**
```python
from api_services import get_hot_topics
topics = get_hot_topics("your-tianapi-key")
# ['35å²ç¨‹åºå‘˜è£¸è¾', 'ä¸ºä»€ä¹ˆå¹´è½»äººä¸ä¹°æˆ¿', ...]
```

---

#### `generate_script_by_style(topic: str, style: str, api_key: str, auto_image_prompt: bool = True) -> List[Dict]`
æ ¹æ®é£æ ¼ç”Ÿæˆå‰§æœ¬ï¼ˆVideoTaxi FSD 2.0 æ ¸å¿ƒå‡½æ•°ï¼‰ã€‚

**å‚æ•°ï¼š**
- `topic`: ä¸»é¢˜è¯
- `style`: é£æ ¼åç§°ï¼ˆ5ç§å¯é€‰ï¼‰
  - `ğŸ—¡ï¸ è®¤çŸ¥åˆºå®¢æµï¼ˆå†²å‡»åŠ›+ä¼˜è¶Šæ„Ÿï¼‰`
  - `ğŸ‘ å¬å‹/å…»æˆç³»ï¼ˆäº’åŠ¨ç‡04+è¯„è®ºçˆ†ç‚¸ï¼‰`
  - `ğŸ¬ POVæ²‰æµ¸æµï¼ˆç¬¬ä¸€äººç§°+ä»£å…¥æ„Ÿï¼‰`
  - `ğŸ”¥ æƒ…ç»ªå®£æ³„æµï¼ˆæè‡´åè½¬+å‘ç–¯æ–‡å­¦ï¼‰`
  - `ğŸ± MemeæŠ—è±¡æµï¼ˆä½æˆæœ¬+ç—…æ¯’ä¼ æ’­ï¼‰`
- `api_key`: DeepSeek API Key
- `auto_image_prompt`: æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆç”»é¢æç¤ºè¯

**è¿”å›ï¼š**
```python
[
    {
        "narration": "å£æ’­æ–‡æ¡ˆï¼ˆå«SSMLæ ‡ç­¾ï¼‰",
        "image_prompt": "è‹±æ–‡ç”»é¢æç¤ºè¯",
        "emotion_vibe": "cold_question",
        "sfx_label": "[Impact]"
    },
    ...
]
```

**ç¤ºä¾‹ï¼š**
```python
from api_services import generate_script_by_style

scenes = generate_script_by_style(
    topic="35å²ç¨‹åºå‘˜è£¸è¾",
    style="ğŸ—¡ï¸ è®¤çŸ¥åˆºå®¢æµï¼ˆå†²å‡»åŠ›+ä¼˜è¶Šæ„Ÿï¼‰",
    api_key="sk-your-key",
    auto_image_prompt=True
)
```

---

#### `generate_images_zhipu(scenes_data: List[Dict], api_key: str) -> List[str]`
è°ƒç”¨æ™ºè°± CogView-3-Plus ç”Ÿæˆå›¾ç‰‡ã€‚

**å‚æ•°ï¼š**
- `scenes_data`: å‰§æœ¬æ•°æ®ï¼ˆå« image_promptï¼‰
- `api_key`: æ™ºè°± API Key

**è¿”å›ï¼š**
- ç”Ÿæˆçš„å›¾ç‰‡æ–‡ä»¶è·¯å¾„åˆ—è¡¨

---

#### `refine_script_by_chat(current_scenes: List[Dict], user_request: str, api_key: str) -> List[Dict]`
å¯¹è¯å¼å‰§æœ¬å¾®è°ƒã€‚

**å‚æ•°ï¼š**
- `current_scenes`: å½“å‰å‰§æœ¬
- `user_request`: ç”¨æˆ·ä¿®æ”¹éœ€æ±‚ï¼ˆå¦‚"åŠ ç‚¹åè½¬"ï¼‰
- `api_key`: DeepSeek API Key

**ç¤ºä¾‹ï¼š**
```python
refined = refine_script_by_chat(
    current_scenes=scenes,
    user_request="ç¬¬äºŒæ®µå¤ªå¹³æ·¡äº†ï¼ŒåŠ ç‚¹åè½¬",
    api_key="sk-your-key"
)
```

---

### video_engine.py

#### `render_ai_video_pipeline(scenes_data, zhipu_key, output_path, pexels_key=None, voice_id="zh-CN-YunxiNeural", style_name=None) -> bool`
æ ¸å¿ƒè§†é¢‘æ¸²æŸ“ç®¡çº¿ã€‚

**å‚æ•°ï¼š**
- `scenes_data`: å‰§æœ¬æ•°æ®åˆ—è¡¨
- `zhipu_key`: æ™ºè°± API Key
- `output_path`: è¾“å‡ºè§†é¢‘è·¯å¾„ï¼ˆå¦‚ `"output.mp4"`ï¼‰
- `pexels_key`: Pexels API Keyï¼ˆå¯é€‰ï¼Œç”¨äºçœŸå®ç´ æå…œåº•ï¼‰
- `voice_id`: é…éŸ³éŸ³è‰² ID
  - Edge TTS: `zh-CN-YunxiNeural`, `zh-CN-XiaoxiaoNeural`
  - ç«å±±å¼•æ“: `volc_zh_male_jingqiangkanye_moon_bigtts`
- `style_name`: é£æ ¼åç§°ï¼ˆç”¨äºåŒ¹é…BGMï¼‰

**è¿”å›ï¼š**
- `True`: æ¸²æŸ“æˆåŠŸ
- `False`: æ¸²æŸ“å¤±è´¥

**ç¤ºä¾‹ï¼š**
```python
from video_engine import render_ai_video_pipeline

success = render_ai_video_pipeline(
    scenes_data=scenes,
    zhipu_key="your-zhipu-key",
    output_path="video.mp4",
    voice_id="zh-CN-YunxiNeural",
    style_name="ğŸ—¡ï¸ è®¤çŸ¥åˆºå®¢æµï¼ˆå†²å‡»åŠ›+ä¼˜è¶Šæ„Ÿï¼‰"
)
```

---

### tianapi_navigator.py

#### `TianapiNavigator(api_key: str)`
çƒ­ç‚¹å¯¼èˆªå‘˜ç±»ã€‚

**æ–¹æ³•ï¼š**

##### `fetch_today_missions(num: int = 5) -> List[Dict]`
è·å–ä»Šæ—¥çƒ­ç‚¹ä»»åŠ¡æ¸…å•ã€‚

**è¿”å›ï¼š**
```python
[
    {
        "topic": "35å²ç¨‹åºå‘˜è£¸è¾",
        "hot_value": 9800000,
        "heat_level": "ğŸ”¥ğŸ”¥ğŸ”¥ çˆ†æ¬¾",
        "recommended_style": "ğŸ—¡ï¸ è®¤çŸ¥åˆºå®¢æµï¼ˆå†²å‡»åŠ›+ä¼˜è¶Šæ„Ÿï¼‰",
        "description": "å½“å‰æŠ–éŸ³çƒ­åº¦ï¼š9,800,000"
    },
    ...
]
```

##### `expand_topic_context(topic: str, api_key: str) -> Dict`
çƒ­ç‚¹èƒŒæ™¯æ‰©å……å™¨ã€‚

**è¿”å›ï¼š**
```python
{
    "success": True,
    "topic": "35å²ç¨‹åºå‘˜è£¸è¾",
    "expansion": {
        "emotion_mother": "ç„¦è™‘ä¸è‡ªæˆ‘æ€€ç–‘",
        "pain_points": ["èŒä¸šå¤©èŠ±æ¿", "å¹´é¾„æ­§è§†", "æ”¶å…¥ä¸ç¨³å®š"],
        "target_audience": "25-35å²èŒåœºäºº",
        "content_angles": ["è½¬å‹ç»éªŒ", "å¿ƒç†å‡†å¤‡", "ç»æµè§„åˆ’"],
        "controversy_potential": "8/10"
    }
}
```

---

#### `auto_pilot_generate(navigator, deepseek_key, zhipu_key, pexels_key, voice_id, num_missions) -> List[Dict]`
å…¨è‡ªåŠ¨å‘è½¦å‡½æ•°ã€‚

**ç¤ºä¾‹ï¼š**
```python
from tianapi_navigator import TianapiNavigator, auto_pilot_generate

navigator = TianapiNavigator("your-tianapi-key")
results = auto_pilot_generate(
    navigator=navigator,
    deepseek_key="sk-your-key",
    zhipu_key="your-zhipu-key",
    pexels_key="your-pexels-key",
    voice_id="zh-CN-YunxiNeural",
    num_missions=3
)
```

---

### scheduler_tower.py

#### `SchedulerTower(tianapi_key, deepseek_key, zhipu_key, pexels_key="", output_dir="./output")`
è°ƒåº¦å¡”å°ç±»ï¼ˆ7x24å°æ—¶æ— äººå€¼å®ˆï¼‰ã€‚

**æ–¹æ³•ï¼š**

##### `auto_drive_mission(num_videos: int = 1) -> List[Dict]`
æ‰§è¡Œä¸€æ¬¡è‡ªåŠ¨é©¾é©¶ä»»åŠ¡ã€‚

##### `schedule_daily_run(run_time: str = "04:00", num_videos: int = 1)`
è®¾ç½®æ¯æ—¥å®šæ—¶è¿è¡Œã€‚

##### `run_scheduler()`
å¯åŠ¨è°ƒåº¦å™¨ï¼ˆé˜»å¡å¼ï¼Œç”¨äºæœ¬åœ°/VPSï¼‰ã€‚

---

#### `start_background_scheduler(tianapi_key, deepseek_key, zhipu_key, pexels_key, run_time, num_videos) -> bool`
Streamlit Cloud åå°è°ƒåº¦å¯åŠ¨å™¨ï¼ˆéé˜»å¡ï¼‰ã€‚

**ç¤ºä¾‹ï¼š**
```python
from scheduler_tower import start_background_scheduler, get_scheduler_status

# å¯åŠ¨åå°è°ƒåº¦
start_background_scheduler(
    tianapi_key=st.secrets["TIANAPI_KEY"],
    deepseek_key=st.secrets["DEEPSEEK_KEY"],
    zhipu_key=st.secrets["ZHIPU_KEY"],
    run_time="04:00",
    num_videos=1
)

# è·å–çŠ¶æ€
status = get_scheduler_status()
st.write(f"ä¸‹æ¬¡å‘è½¦: {status['next_run']}")
```

---

### db_manager.py

#### `get_or_create_user(user_id: str) -> Dict`
è·å–æˆ–åˆ›å»ºç”¨æˆ·ã€‚

**è¿”å›ï¼š**
```python
{
    "user_id": "username",
    "credits": 20,
    "last_login_date": "2026-02-22",
    "consecutive_days": 1
}
```

#### `check_in(user_id: str) -> Tuple[bool, str]`
æ¯æ—¥ç­¾åˆ°ã€‚

**è¿”å›ï¼š**
```python
(True, "ç­¾åˆ°æˆåŠŸï¼è¿ç»­ 3 å¤©ï¼Œè·å¾— 8 ç§¯åˆ†ã€‚å½“å‰æ€»ç§¯åˆ†: 45")
```

#### `deduct_credits(user_id: str, cost: int) -> bool`
æ‰£é™¤ç§¯åˆ†ã€‚

#### `save_message(user_id: str, role: str, content: str)`
ä¿å­˜èŠå¤©è®°å½•ã€‚

#### `load_messages(user_id: str) -> List[Dict]`
åŠ è½½èŠå¤©è®°å½•ã€‚

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### éƒ¨ç½²é—®é¢˜

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| `ModuleNotFoundError: No module named 'schedule'` | ä¾èµ–æœªå®‰è£… | ç¡®ä¿ `requirements.txt` åŒ…å« `schedule>=1.2.0` |
| Streamlit Cloud æ„å»ºå¤±è´¥ | ç³»ç»Ÿä¾èµ–ç¼ºå¤± | æ£€æŸ¥ `packages.txt` æ˜¯å¦åŒ…å« `fonts-noto-cjk` |
| è§†é¢‘ç”Ÿæˆå¤±è´¥ | ImageMagick/FFmpeg ç¼ºå¤± | Linux: å·²è‡ªåŠ¨å®‰è£…ï¼›Windows: æ‰‹åŠ¨å®‰è£… ImageMagick |

### è¿è¡Œæ—¶é—®é¢˜

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| å­—å¹•ä¹±ç  | å­—ä½“æ–‡ä»¶ç¼ºå¤± | ç¡®ä¿ `assets/font.ttf` å­˜åœ¨ |
| éŸ³é¢‘ç”Ÿæˆå¤±è´¥ | ç½‘ç»œé—®é¢˜/TTS æœåŠ¡å¼‚å¸¸ | æ£€æŸ¥ç½‘ç»œï¼ŒæŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿— |
| å›¾ç‰‡ç”Ÿæˆå¤±è´¥ | æ™ºè°± API é¢åº¦ä¸è¶³ | æ£€æŸ¥æ™ºè°±æ§åˆ¶å°ä½™é¢ |
| ç§¯åˆ†ä¸è¶³ | ä½™é¢ä¸å¤Ÿ | æ¯æ—¥ç­¾åˆ°æˆ–åˆ‡æ¢ä½æ¶ˆè€—æ¨¡å‹ |
| BGMæ— æ³•æ’­æ”¾ | æ–‡ä»¶ç¼ºå¤± | ç¡®ä¿ `assets/bgm.mp3` å­˜åœ¨ |

### API é—®é¢˜

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| `401 Unauthorized` | API Key é”™è¯¯ | æ£€æŸ¥ Secrets é…ç½® |
| `429 Too Many Requests` | è¯·æ±‚é¢‘ç‡è¿‡é«˜ | é™ä½è°ƒç”¨é¢‘ç‡ï¼Œæˆ–å‡çº§å¥—é¤ |
| `500 Internal Server Error` | æœåŠ¡å•†æ•…éšœ | ç¨åé‡è¯• |

### è°ƒåº¦é—®é¢˜

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| Streamlit Cloud å®šæ—¶ä»»åŠ¡ä¸æ‰§è¡Œ | æœåŠ¡å™¨ä¼‘çœ  | ä½¿ç”¨ UptimeRobot å®šæ—¶ Pingï¼Œæˆ–éƒ¨ç½²åˆ° VPS |
| åå°çº¿ç¨‹åœæ­¢ | é¡µé¢å…³é—­ | Streamlit Cloud é™åˆ¶ï¼Œéœ€ä½¿ç”¨ VPS å®ç°çœŸÂ·7x24 |

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡åŸç†

### æ¨¡å—åŒ–æ¶æ„ (v3.1.0)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åº”ç”¨å…¥å£å±‚ (App Layer)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                      app.py (276è¡Œ)                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚ é¡µé¢é…ç½®      â”‚  â”‚ Session Stateâ”‚  â”‚  è·¯ç”±åˆ†å‘    â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ set_page_configâ”‚  â”‚   åˆå§‹åŒ–     â”‚  â”‚  Tabè·¯ç”±    â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        è§†å›¾å±‚ (View Layer)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ script_view â”‚  â”‚ video_view  â”‚  â”‚      assets_view        â”‚  â”‚
â”‚  â”‚  (625è¡Œ)    â”‚  â”‚   (47è¡Œ)    â”‚  â”‚       (73è¡Œ)            â”‚  â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚ â€¢ åˆ›ä½œé¢æ¿   â”‚  â”‚ â€¢ åˆ†é•œé¢„è§ˆ   â”‚  â”‚ â€¢ åˆ›ä½œç»Ÿè®¡              â”‚  â”‚
â”‚  â”‚ â€¢ å‰§æœ¬ç¼–è¾‘å™¨ â”‚  â”‚ â€¢ æ–‡æ¡ˆæŸ¥çœ‹   â”‚  â”‚ â€¢ ç‰ˆæœ¬ç®¡ç†              â”‚  â”‚
â”‚  â”‚ â€¢ å·¥ä½œæµçŠ¶æ€ â”‚  â”‚             â”‚  â”‚ â€¢ ç‰ˆæœ¬æ¢å¤              â”‚  â”‚
â”‚  â”‚ â€¢ SSMLæ£€æŸ¥  â”‚  â”‚             â”‚  â”‚                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¸šåŠ¡é€»è¾‘å±‚ (Service Layer)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ api_servicesâ”‚  â”‚video_engine â”‚  â”‚      db_manager         â”‚  â”‚
â”‚  â”‚  (548è¡Œ)    â”‚  â”‚  (890è¡Œ)    â”‚  â”‚      (146è¡Œ)            â”‚  â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚ â€¢ å‰§æœ¬ç”Ÿæˆ   â”‚  â”‚ â€¢ è§†é¢‘æ¸²æŸ“   â”‚  â”‚ â€¢ ç”¨æˆ·ç®¡ç†              â”‚  â”‚
â”‚  â”‚ â€¢ AIç»˜ç”»    â”‚  â”‚ â€¢ TTSåˆæˆ   â”‚  â”‚ â€¢ ç§¯åˆ†ç³»ç»Ÿ              â”‚  â”‚
â”‚  â”‚ â€¢ å‰§æœ¬ç²¾ä¿®   â”‚  â”‚ â€¢ BGMæ··éŸ³   â”‚  â”‚ â€¢ ç‰ˆæœ¬æŒä¹…åŒ–            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è·¯ç”±ä¸­å¿ƒåŒ–è®¾è®¡åŸåˆ™

1. **å•ä¸€èŒè´£**: `app.py` ä»…è´Ÿè´£è·¯ç”±å’ŒçŠ¶æ€åˆå§‹åŒ–ï¼Œä¸å¤„ç†å…·ä½“UIé€»è¾‘
2. **ä¾èµ–æ³¨å…¥**: æœåŠ¡å±‚å‡½æ•°é€šè¿‡å‚æ•°ä¼ é€’ç»™è§†å›¾å±‚ï¼Œä¾¿äºæµ‹è¯•å’Œæ›¿æ¢
3. **è§†å›¾å±‚åˆ†ç¦»**: æ¯ä¸ª Tab ç‹¬ç«‹æˆä¸€ä¸ªæ¨¡å—ï¼Œä»£ç æ¸…æ™°å¯ç»´æŠ¤
4. **å‘åå…¼å®¹**: ä¿æŒåŸæœ‰ API æ¥å£ä¸å˜ï¼ŒåŠŸèƒ½å®Œå…¨ä¿ç•™

### å·¥ä½œæµçŠ¶æ€æœº

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ¸è¿›å¼å·¥ä½œæµçŠ¶æ€æœº                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚  draft  â”‚â”€â”€â”€â†’â”‚ locked  â”‚â”€â”€â”€â†’â”‚producing â”‚â”€â”€â”€â†’â”‚completedâ”‚â”‚
â”‚   â”‚  è‰ç¨¿   â”‚    â”‚  é”å®š   â”‚    â”‚  ç”Ÿäº§ä¸­   â”‚    â”‚  å®Œæˆ   â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜â”‚
â”‚        â”‚              â”‚              â”‚               â”‚     â”‚
â”‚        â”‚ å¯ç¼–è¾‘       â”‚ ä¸å¯ç¼–è¾‘     â”‚ æ¸²æŸ“ä¸­        â”‚ å¯ä¸‹è½½â”‚
â”‚        â”‚ å¯å¾®è°ƒ       â”‚ å¯è§£é”       â”‚ è¿›åº¦æ˜¾ç¤º      â”‚ å¯é‡ç½®â”‚
â”‚        â”‚              â”‚              â”‚               â”‚     â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚               â”‚     â”‚
â”‚           é”å®šå‰§æœ¬                     â”‚               â”‚     â”‚
â”‚                                        â”‚               â”‚     â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚     â”‚
â”‚        â”‚ ä¸€é”®ç”Ÿäº§                                       â”‚     â”‚
â”‚        â”‚                                               â”‚     â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                      åˆ›ä½œä¸‹ä¸€ä¸ªè§†é¢‘                            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è§†é¢‘æ¸²æŸ“æµæ°´çº¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è¾“å…¥å‰§æœ¬   â”‚â”€â”€â”€â†’â”‚  AIç”Ÿæˆå›¾ç‰‡  â”‚â”€â”€â”€â†’â”‚  TTSåˆæˆéŸ³é¢‘ â”‚â”€â”€â”€â†’â”‚  MoviePyæ¸²æŸ“ â”‚
â”‚  scenes_dataâ”‚    â”‚  1024x1920  â”‚    â”‚   MP3æ ¼å¼   â”‚    â”‚  1080x1920  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ·»åŠ å­—å¹•   â”‚â”€â”€â”€â†’â”‚  æ··å…¥BGM    â”‚â”€â”€â”€â†’â”‚  è¾“å‡ºMP4    â”‚
â”‚ Pillowç»˜åˆ¶  â”‚    â”‚ é£æ ¼åŒ–éŸ³é‡  â”‚    â”‚ H.264ç¼–ç    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµå‘å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·äº¤äº’å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ çƒ­ç‚¹é€‰æ‹©  â”‚  â”‚ å‰§æœ¬ç”Ÿæˆ  â”‚  â”‚ ç²¾ä¿®å¾®è°ƒ  â”‚  â”‚ è§†é¢‘æ¸²æŸ“  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚             â”‚             â”‚             â”‚
        â–¼             â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ä¸šåŠ¡é€»è¾‘å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              api_services.py (AIæœåŠ¡å±‚)                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚  â”‚  â”‚DeepSeek  â”‚  â”‚ æ™ºè°±AI   â”‚  â”‚ å¤©è¡Œæ•°æ®  â”‚  â”‚ å¤§å¸ˆç²¾ä¿®  â”‚â”‚   â”‚
â”‚  â”‚  â”‚å‰§æœ¬ç”Ÿæˆ  â”‚  â”‚ å›¾ç‰‡ç”Ÿæˆ  â”‚  â”‚ çƒ­ç‚¹è·å–  â”‚  â”‚ å¯¹è¯å¾®è°ƒ  â”‚â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              video_engine.py (æ¸²æŸ“å¼•æ“)                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚  â”‚  â”‚ Edge TTS â”‚  â”‚ç«å±±å¼•æ“  â”‚  â”‚ MoviePy  â”‚  â”‚ Pillow   â”‚â”‚   â”‚
â”‚  â”‚  â”‚è¯­éŸ³åˆæˆ  â”‚  â”‚é«˜é˜¶TTS   â”‚  â”‚ è§†é¢‘åˆæˆ  â”‚  â”‚ å­—å¹•ç»˜åˆ¶  â”‚â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚             â”‚             â”‚             â”‚
        â–¼             â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ•°æ®æŒä¹…å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  SQLite     â”‚  â”‚  æœ¬åœ°æ–‡ä»¶   â”‚  â”‚  äº‘ç«¯å­˜å‚¨   â”‚             â”‚
â”‚  â”‚ ç”¨æˆ·/ç§¯åˆ†   â”‚  â”‚ è§†é¢‘/å›¾ç‰‡   â”‚  â”‚ (å¾…å®ç°)    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ å¾…åŠäº‹é¡¹ (TODO)

### é«˜ä¼˜å…ˆçº§
- [ ] è§†é¢‘å‘å¸ƒå¯¹æ¥ (æŠ–éŸ³API)
- [ ] å†å²èµ„äº§é¡µé¢å®Œå–„ï¼ˆè§†é¢‘ç®¡ç†ã€é‡æ–°ç¼–è¾‘ï¼‰
- [ ] GitHub Actions å®šæ—¶ä»»åŠ¡ï¼ˆçœŸÂ·7x24æ— äººå€¼å®ˆï¼‰

### ä¸­ä¼˜å…ˆçº§
- [ ] å¤šè¯­è¨€æ”¯æŒï¼ˆè‹±æ–‡ç•Œé¢ï¼‰
- [ ] ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–
- [ ] A/Bæµ‹è¯•æ¡†æ¶ï¼ˆä¸åŒé£æ ¼æ•ˆæœå¯¹æ¯”ï¼‰

### ä½ä¼˜å…ˆçº§
- [ ] å®æ—¶åä½œåŠŸèƒ½ï¼ˆå¤šäººåŒæ—¶ç¼–è¾‘ï¼‰
- [ ] æ•°æ®åˆ†æä»ªè¡¨ç›˜ï¼ˆæ’­æ”¾é‡ã€å®Œæ’­ç‡ç»Ÿè®¡ï¼‰
- [ ] è‡ªå®šä¹‰å­—ä½“ä¸Šä¼ 

---

## ğŸ‘¥ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

**æäº¤è§„èŒƒï¼š**
- `feat`: æ–°åŠŸèƒ½
- `fix`: é—®é¢˜ä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `refactor`: é‡æ„
- `perf`: æ€§èƒ½ä¼˜åŒ–

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

> **æµé‡æ­£åœ¨ 7x24 å°æ—¶ä¸ºä½ è·‘å•** ğŸš–
